const pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=12";function n(){return e}function a(t){"object"==typeof t&&["name","detailsUrl"].every(e=>Object.keys(t).includes(e))&&e.push(t)}function r(){return o(),fetch(t).then(function(e){return e.json()}).then(function(e){t=e.next,e.results.forEach(function(e){let t=e.url.match(/.*\/(\d+)\/$/)[1];a({id:`#${t.padStart(4,"0")}`,name:e.name,detailsUrl:e.url,cover:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${t}.png`}),c()})}).catch(function(e){console.error(e),c()})}function l(e){return o(),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types,c()}).catch(function(e){console.error(e),c()})}function i(e){let t=document.createElement("img");t.classList.add("card-img-top","bg-secondary","p-5"),t.src=e.cover;let n=document.createElement("div");n.classList.add("card-body");let a=document.createElement("h2");a.innerHTML=e.name;let r=document.createElement("small");r.classList.add("text-muted"),r.innerText=e.id;let i=document.createElement("p");i.classList.add("card-text"),i.appendChild(r);let o=document.createElement("button");o.classList.add("btn","btn-block","btn-primary","stretched-link"),o.setAttribute("data-bs-toggle","modal"),o.setAttribute("data-bs-target","#exampleModal"),o.innerText="Details",function e(t,n){t.addEventListener("click",()=>{(function e(t){l(t).then(function(){var e;let n,a,r,l;e=t,document.querySelector("#exampleModalLabel").innerText=e.name,n=document.createElement("img"),n.src=e.imageUrl,a=document.createElement("p"),a.innerText=`Height: ${e.height}`,r=document.createElement("p"),r.innerText=`Types: ${e.types.map(({type:e})=>e.name).join(", ")}`,l=document.querySelector(".modal-body"),l.innerHTML="",l.appendChild(n),l.appendChild(a),l.appendChild(r)})})(n)})}(o,e);let c=document.createElement("p");c.classList.add("card-text","text-center"),c.appendChild(o),n.appendChild(a),n.appendChild(i),n.appendChild(c);let d=document.createElement("div");d.classList.add("card","mb-4"),d.appendChild(t),d.appendChild(n);let s=document.createElement("div");s.classList.add("col-xs-12","col-sm-6","col-lg-4","col-xl-3"),s.appendChild(d);document.querySelector(".pokemon-list").appendChild(s)}function o(){document.querySelector(".alert.alert--info").style.display="block"}function c(){document.querySelector(".alert.alert--info").style.display="none"}return document.querySelector("#search").addEventListener("input",t=>{var n;document.querySelector(".pokemon-list").innerHTML="",(n=t.target.value,e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()))).forEach(e=>i(e))}),document.querySelector("#load-more").addEventListener("click",async()=>{await r(),e.slice(-12).forEach(e=>i(e))}),{getAll:n,add:a,addListItem:i,loadList:r,loadDetails:l}}();pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>{pokemonRepository.addListItem(e)})});
