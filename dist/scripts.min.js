const pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=12";function n(){return e}function a(t){"object"==typeof t&&["id","name","detailsUrl","types","cover"].every(e=>Object.keys(t).includes(e))&&e.push(t)}function r(){return o(),fetch(t).then(function(e){return e.json()}).then(function(e){t=e.next;let n=e.results.map(function(e){return function e(t){let n=t.detailsUrl.match(/.*\/(\d+)\/$/)[1];return fetch(t.detailsUrl).then(function(e){return e.json()}).then(function(e){t.id=`#${n.padStart(4,"0")}`,t.imageUrl=e.sprites.front_default,t.types=e.types.map(({type:e})=>e.name),t.cover=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${n}.png`,a(t)}).catch(function(e){console.error(e)})}({name:e.name,detailsUrl:e.url})});return Promise.all(n).then(()=>d())}).catch(function(e){console.error(e),d()})}function l(e){return o(),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,d()}).catch(function(e){console.error(e),d()})}function i(e){let t=document.createElement("img");t.classList.add("card-img-top","bg-secondary","p-5"),t.src=e.cover;let n=document.createElement("div");n.classList.add("card-body");let a=document.createElement("h2");a.innerHTML=e.name;let r=document.createElement("small");r.classList.add("text-muted"),r.innerText=e.id;let i=document.createElement("p");i.classList.add("card-text"),i.appendChild(r);let o=document.createElement("p");o.classList.add("card-text","d-flex","gap-1"),e.types.forEach(function(e){let t=document.createElement("span");t.classList.add("badge",`type-bg-${e}`),t.innerText=e,o.appendChild(t)});let d=document.createElement("button");d.classList.add("btn","btn-block","btn-primary","stretched-link","mt-2"),d.setAttribute("data-bs-toggle","modal"),d.setAttribute("data-bs-target","#exampleModal"),d.innerText="Details",function e(t,n){t.addEventListener("click",()=>{(function e(t){l(t).then(function(){var e;let n,a,r,l;e=t,document.querySelector("#exampleModalLabel").innerText=e.name,n=document.createElement("img"),n.src=e.imageUrl,a=document.createElement("p"),a.innerText=`Height: ${e.height}`,r=document.createElement("p"),r.innerText=`Types: ${e.types.join(", ")}`,l=document.querySelector(".modal-body"),l.innerHTML="",l.appendChild(n),l.appendChild(a),l.appendChild(r)})})(n)})}(d,e);let c=document.createElement("p");c.classList.add("card-text","text-center"),c.appendChild(d),n.appendChild(a),n.appendChild(i),n.appendChild(o),n.appendChild(c);let s=document.createElement("div");s.classList.add("card","mb-4"),s.appendChild(t),s.appendChild(n);let p=document.createElement("div");p.classList.add("col-xs-12","col-sm-6","col-lg-4","col-xl-3"),p.appendChild(s);document.querySelector(".pokemon-list").appendChild(p)}function o(){document.querySelector(".alert.alert--info").style.display="block"}function d(){document.querySelector(".alert.alert--info").style.display="none"}return document.querySelector("#search").addEventListener("input",t=>{var n;document.querySelector(".pokemon-list").innerHTML="",(n=t.target.value,e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()))).forEach(e=>i(e))}),document.querySelector("#load-more").addEventListener("click",async()=>{await r(),e.slice(-12).forEach(e=>i(e))}),{getAll:n,add:a,addListItem:i,loadList:r,loadDetails:l}}();pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>{pokemonRepository.addListItem(e)})});
