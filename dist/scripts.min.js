const pokemonRepository=function(){let e=[];function t(){return e}function n(t){"object"==typeof t&&["name","detailsUrl"].every(e=>Object.keys(t).includes(e))&&e.push(t)}function r(e){return a(),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,e.types=t.types,o()}).catch(function(e){console.error(e),o()})}function a(){document.querySelector(".alert.alert--info").style.display="block"}function o(){document.querySelector(".alert.alert--info").style.display="none"}return{getAll:t,add:n,search:function t(n){return e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()))},addListItem:function e(t){let n=document.createElement("img");n.classList.add("card-img-top","bg-secondary","p-5"),n.src=t.cover;let a=document.createElement("div");a.classList.add("card-body");let o=document.createElement("h2");o.innerHTML=t.name;let i=document.createElement("small");i.classList.add("text-muted"),i.innerText=t.id;let l=document.createElement("p");l.classList.add("card-text"),l.appendChild(i);let s=document.createElement("button");s.classList.add("btn","btn-block","btn-primary","stretched-link"),s.setAttribute("data-bs-toggle","modal"),s.setAttribute("data-bs-target","#exampleModal"),s.innerText="Details",function e(t,n){t.addEventListener("click",()=>{(function e(t){r(t).then(function(){var e;let n,r,a,o;e=t,document.querySelector("#exampleModalLabel").innerText=e.name,n=document.createElement("img"),n.src=e.imageUrl,r=document.createElement("p"),r.innerText=`Height: ${e.height}`,a=document.createElement("p"),a.innerText=`Types: ${e.types.map(({type:e})=>e.name).join(", ")}`,o=document.querySelector(".modal-body"),o.innerHTML="",o.appendChild(n),o.appendChild(r),o.appendChild(a)})})(n)})}(s,t);let c=document.createElement("p");c.classList.add("card-text","text-center"),c.appendChild(s),a.appendChild(o),a.appendChild(l),a.appendChild(c);let d=document.createElement("div");d.classList.add("card","mb-4"),d.appendChild(n),d.appendChild(a);let p=document.createElement("div");p.classList.add("col-xs-12","col-sm-6","col-lg-4","col-xl-3"),p.appendChild(d);document.querySelector(".pokemon-list").appendChild(p)},loadList:function e(){return a(),fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){let t=e.url.match(/.*\/(\d+)\/$/)[1];n({id:`#${t.padStart(4,"0")}`,name:e.name,detailsUrl:e.url,cover:`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${t}.png`}),o()})}).catch(function(e){console.error(e),o()})},loadDetails:r,resetList:function e(){document.querySelector(".pokemon-list").innerHTML=""}}}();pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>{pokemonRepository.addListItem(e)})}),document.querySelector("#search").addEventListener("input",e=>{pokemonRepository.resetList(),pokemonRepository.search(e.target.value).forEach(e=>{pokemonRepository.addListItem(e)})});
