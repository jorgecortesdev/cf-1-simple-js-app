const pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=12";function n(){return e}function r(t){"object"==typeof t&&["id","name","detailsUrl","types","cover"].every(e=>Object.keys(t).includes(e))&&e.push(t)}function a(){return o(),fetch(t).then(function(e){return e.json()}).then(function(e){t=e.next;let n=e.results.map(function(e){return function e(t){let n=t.detailsUrl.match(/.*\/(\d+)\/$/)[1];return fetch(t.detailsUrl).then(function(e){return e.json()}).then(function(e){t.id=`#${n.padStart(4,"0")}`,t.imageUrl=e.sprites.front_default,t.types=e.types.map(({type:e})=>e.name),t.cover=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${n}.png`,r(t)}).catch(function(e){console.error(e)})}({name:e.name,detailsUrl:e.url})});return Promise.all(n).then(()=>s())}).catch(function(e){console.error(e),s()})}function l(e){return o(),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.imageUrl=t.sprites.front_default,e.height=t.height,s()}).catch(function(e){console.error(e),s()})}function i(e){let t=document.createElement("p");t.classList.add("panel__id"),t.innerText=e.id;let n=document.createElement("h2");n.innerHTML=e.name;let r=document.createElement("div");r.classList.add("panel__types"),e.types.forEach(function(e){let t=document.createElement("p");t.classList.add("panel__badge"),t.innerText=e,r.appendChild(t)});let a=document.createElement("img");a.classList.add("panel__image"),a.src=e.cover;let i=document.createElement("a");i.classList.add("stretched-link","mt-2"),i.setAttribute("data-bs-toggle","modal"),i.setAttribute("data-bs-target","#exampleModal"),function e(t,n){t.addEventListener("click",()=>{(function e(t){l(t).then(function(){var e;let n,r,a,l;e=t,document.querySelector("#exampleModalLabel").innerText=e.name,n=document.createElement("img"),n.src=e.imageUrl,r=document.createElement("p"),r.innerText=`Height: ${e.height}`,a=document.createElement("p"),a.innerText=`Types: ${e.types.join(", ")}`,l=document.querySelector(".modal-body"),l.innerHTML="",l.appendChild(n),l.appendChild(r),l.appendChild(a)})})(n)})}(i,e);let o=document.createElement("div");o.classList.add("panel",`type-bg-${e.types[0]}`),o.appendChild(t),o.appendChild(n),o.appendChild(r),o.appendChild(a),o.appendChild(i);let s=document.createElement("div");s.classList.add("col-xs-12","col-sm-6","col-lg-4","col-xl-3"),s.appendChild(o);document.querySelector(".pokemon-list").appendChild(s)}function o(){document.querySelector(".alert.alert--info").style.display="block"}function s(){document.querySelector(".alert.alert--info").style.display="none"}return document.querySelector("#search").addEventListener("input",t=>{var n;document.querySelector(".pokemon-list").innerHTML="",(n=t.target.value,e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()))).forEach(e=>i(e))}),document.querySelector("#load-more").addEventListener("click",async()=>{await a(),e.slice(-12).forEach(e=>i(e))}),{getAll:n,add:r,addListItem:i,loadList:a,loadDetails:l}}();pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>{pokemonRepository.addListItem(e)})});
