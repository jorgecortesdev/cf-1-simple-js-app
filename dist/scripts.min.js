const pokemonRepository=function(){let e=[],t="https://pokeapi.co/api/v2/pokemon/?limit=12";function n(){return e}function a(t){"object"==typeof t&&["id","name","detailsUrl","types","cover"].every(e=>Object.keys(t).includes(e))&&e.push(t)}function l(){return r(),fetch(t).then(function(e){return e.json()}).then(function(e){t=e.next;let n=e.results.map(function(e){return function e(t){let n=t.detailsUrl.match(/.*\/(\d+)\/$/)[1];return fetch(t.detailsUrl).then(function(e){return e.json()}).then(function(e){t.id=`#${n.padStart(4,"0")}`,t.types=e.types.map(({type:e})=>e.name),t.cover=`https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/${n}.png`,a(t)}).catch(function(e){console.error(e)})}({name:e.name,detailsUrl:e.url})});return Promise.all(n).then(()=>s())}).catch(function(e){console.error(e),s()})}function i(e){return r(),fetch(e.detailsUrl).then(function(e){return e.json()}).then(function(t){e.height=t.height,e.weight=t.weight,e.species=t.species.name,e.abilities=t.abilities.map(({ability:e})=>e.name),e.stats=t.stats.map(e=>({name:e.stat.name,value:e.base_stat})),s()}).catch(function(e){console.error(e),s()})}function d(e){let t=document.createElement("p");t.classList.add("panel__id"),t.innerText=e.id;let n=document.createElement("h2");n.innerHTML=e.name;let a=document.createElement("div");a.classList.add("panel__types"),e.types.forEach(function(e){let t=document.createElement("p");t.classList.add("panel__badge"),t.innerText=e,a.appendChild(t)});let l=document.createElement("img");l.classList.add("panel__image"),l.src=e.cover;let d=document.createElement("a");d.classList.add("stretched-link","mt-2"),d.setAttribute("data-bs-toggle","modal"),d.setAttribute("data-bs-target","#exampleModal"),function e(t,n){t.addEventListener("click",()=>{(function e(t){i(t).then(function(){(function e(t){let n=document.querySelector(".modal-content");n.className="",n.classList.add("modal-content",`type-bg-${t.types[0]}`);let a=document.createElement("h2");a.innerText=t.name;let l=document.createElement("ul");l.classList.add("panel__types"),t.types.forEach(function(e){let t=document.createElement("li");t.classList.add("panel__badge"),t.innerText=e,l.appendChild(t)});let i=document.createElement("div");i.classList.add("modal-header-title"),i.appendChild(a),i.appendChild(l);let d=document.createElement("div");d.classList.add("modal-header-id"),d.innerText=t.id;let r=document.createElement("div");r.appendChild(i),r.appendChild(d);let s=document.createElement("img");s.src=t.cover;let c=document.querySelector(".modal-header");c.innerHTML="",c.appendChild(r),c.appendChild(s);let p=document.createElement("dl"),o=document.createElement("dt");o.innerText="Species",p.appendChild(o);let m=document.createElement("dd");m.innerText=t.species,p.appendChild(m);let h=document.createElement("dt");h.innerText="Height",p.appendChild(h);let u=document.createElement("dd");u.innerText=t.height,p.appendChild(u);let f=document.createElement("dt");f.innerText="Weight",p.appendChild(f);let E=document.createElement("dd");E.innerText=t.weight,p.appendChild(E);let y=document.createElement("dt");y.innerText="Abilities",p.appendChild(y);let C=document.createElement("dd");C.innerText=t.abilities.join(", "),p.appendChild(C);let b=document.querySelector("#myTabContent");b.innerHTML="";let g=document.createElement("div");g.classList.add("tab-pane","fade","show","active"),g.setAttribute("id","about-tab-pane"),g.appendChild(p),b.appendChild(g);let L=document.createElement("dl");t.stats.forEach(e=>{let n=document.createElement("dt");n.innerText="special-attack"===e.name?"sp. atk":"special-defense"===e.name?"sp. def":e.name,L.appendChild(n);let a=document.createElement("dd");a.classList.add("d-flex","flex-row","gap-3","align-items-center");let l=document.createElement("span");l.innerText=e.value,a.appendChild(l);let i=document.createElement("div");i.classList.add("d-block","w-100");let d=document.createElement("span");d.classList.add("progress"),d.style="height: 16px;";let r=document.createElement("span");r.classList.add("progress-bar",`type-bg-${t.types[0]}`),r.style=`width: ${e.value}%`,d.appendChild(r),i.appendChild(d),a.appendChild(i),L.appendChild(a)});let v=document.createElement("div");v.classList.add("tab-pane","fade"),v.setAttribute("id","stats-tab-pane"),v.appendChild(L),b.appendChild(v);let x=document.querySelector('#myTab button[data-bs-target="#about-tab-pane"]');bootstrap.Tab.getInstance(x).show()})(t)})})(n)})}(d,e);let r=document.createElement("div");r.classList.add("panel",`type-bg-${e.types[0]}`),r.appendChild(t),r.appendChild(n),r.appendChild(a),r.appendChild(l),r.appendChild(d);let s=document.createElement("div");s.classList.add("col-xs-12","col-sm-6","col-lg-4","col-xl-3"),s.appendChild(r);document.querySelector(".pokemon-list").appendChild(s)}function r(){document.querySelector(".alert.alert--info").style.display="block"}function s(){document.querySelector(".alert.alert--info").style.display="none"}return document.querySelector("#search").addEventListener("input",t=>{var n;document.querySelector(".pokemon-list").innerHTML="",(n=t.target.value,e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()))).forEach(e=>d(e))}),document.querySelector("#load-more").addEventListener("click",async()=>{await l(),e.slice(-12).forEach(e=>d(e))}),{getAll:n,add:a,addListItem:d,loadList:l,loadDetails:i}}();pokemonRepository.loadList().then(()=>{pokemonRepository.getAll().forEach(e=>{pokemonRepository.addListItem(e)})});
